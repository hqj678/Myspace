{"ast":null,"code":"import $ from 'jquery';\nimport jwt_decode from 'jwt-decode';\nexport default LOGIN = (username, password, props) => {\n  $.ajax({\n    url: \"https://app165.acapp.acwing.com.cn/api/token/\",\n    type: \"POST\",\n    data: {\n      username,\n      password\n    },\n\n    success(resp) {\n      const {\n        access,\n        refresh\n      } = resp;\n      const access_obj = jwt_decode(access);\n      setInterval(() => {\n        $.ajax({\n          url: \"https://app165.acapp.acwing.com.cn/api/token/refresh/\",\n          type: \"POST\",\n          data: {\n            refresh\n          },\n\n          success(resp) {\n            context.commit('updateAccess', resp.access);\n          }\n\n        });\n      }, 4.5 * 60 * 1000);\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\n        type: \"GET\",\n        data: {\n          user_id: access_obj.user_id\n        },\n        headers: {\n          'Authorization': 'Bearer ' + access\n        },\n\n        success(resp) {\n          context.commit(\"updateUser\", { ...resp,\n            access: access,\n            refresh: refresh,\n            is_login: true\n          });\n          data.success();\n        }\n\n      });\n    },\n\n    error() {\n      data.error();\n    }\n\n  });\n};","map":{"version":3,"names":["$","jwt_decode","LOGIN","username","password","props","ajax","url","type","data","success","resp","access","refresh","access_obj","setInterval","context","commit","user_id","headers","is_login","error"],"sources":["D:/Desk/web应用课/react/myspace/src/ajax/ajax.js"],"sourcesContent":["import $ from 'jquery'\r\nimport jwt_decode from 'jwt-decode'\r\n\r\nexport default LOGIN = (username, password, props) => {\r\n  $.ajax({\r\n    url: \"https://app165.acapp.acwing.com.cn/api/token/\",\r\n    type: \"POST\",\r\n    data: {\r\n      username,\r\n      password\r\n    },\r\n    success(resp) {\r\n      const {access, refresh} = resp;\r\n      const access_obj = jwt_decode(access);\r\n\r\n      setInterval(() => {\r\n        $.ajax({\r\n          url: \"https://app165.acapp.acwing.com.cn/api/token/refresh/\",\r\n          type: \"POST\",\r\n          data: {\r\n            refresh,\r\n          },\r\n          success(resp) {\r\n            context.commit('updateAccess', resp.access)\r\n          }\r\n        })\r\n      }, 4.5*60*1000);\r\n\r\n      $.ajax({\r\n        url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\r\n        type: \"GET\",\r\n        data: {\r\n          user_id: access_obj.user_id,\r\n        },\r\n        headers: {\r\n          'Authorization': 'Bearer ' + access,\r\n        },\r\n        success(resp) {\r\n          context.commit(\"updateUser\", {\r\n            ...resp,\r\n            access: access,\r\n            refresh: refresh,\r\n            is_login: true\r\n          });\r\n          data.success();\r\n        }\r\n      })          \r\n    },\r\n    error() {\r\n      data.error();\r\n    }\r\n  })\r\n}"],"mappings":"AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,eAAeC,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,EAAqBC,KAArB,KAA+B;EACpDL,CAAC,CAACM,IAAF,CAAO;IACLC,GAAG,EAAE,+CADA;IAELC,IAAI,EAAE,MAFD;IAGLC,IAAI,EAAE;MACJN,QADI;MAEJC;IAFI,CAHD;;IAOLM,OAAO,CAACC,IAAD,EAAO;MACZ,MAAM;QAACC,MAAD;QAASC;MAAT,IAAoBF,IAA1B;MACA,MAAMG,UAAU,GAAGb,UAAU,CAACW,MAAD,CAA7B;MAEAG,WAAW,CAAC,MAAM;QAChBf,CAAC,CAACM,IAAF,CAAO;UACLC,GAAG,EAAE,uDADA;UAELC,IAAI,EAAE,MAFD;UAGLC,IAAI,EAAE;YACJI;UADI,CAHD;;UAMLH,OAAO,CAACC,IAAD,EAAO;YACZK,OAAO,CAACC,MAAR,CAAe,cAAf,EAA+BN,IAAI,CAACC,MAApC;UACD;;QARI,CAAP;MAUD,CAXU,EAWR,MAAI,EAAJ,GAAO,IAXC,CAAX;MAaAZ,CAAC,CAACM,IAAF,CAAO;QACLC,GAAG,EAAE,qDADA;QAELC,IAAI,EAAE,KAFD;QAGLC,IAAI,EAAE;UACJS,OAAO,EAAEJ,UAAU,CAACI;QADhB,CAHD;QAMLC,OAAO,EAAE;UACP,iBAAiB,YAAYP;QADtB,CANJ;;QASLF,OAAO,CAACC,IAAD,EAAO;UACZK,OAAO,CAACC,MAAR,CAAe,YAAf,EAA6B,EAC3B,GAAGN,IADwB;YAE3BC,MAAM,EAAEA,MAFmB;YAG3BC,OAAO,EAAEA,OAHkB;YAI3BO,QAAQ,EAAE;UAJiB,CAA7B;UAMAX,IAAI,CAACC,OAAL;QACD;;MAjBI,CAAP;IAmBD,CA3CI;;IA4CLW,KAAK,GAAG;MACNZ,IAAI,CAACY,KAAL;IACD;;EA9CI,CAAP;AAgDD,CAjDD"},"metadata":{},"sourceType":"module"}